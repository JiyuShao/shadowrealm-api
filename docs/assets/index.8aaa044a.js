const D=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};D();const O=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","AggregateError","Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","Proxy","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","Atomics","JSON","Math","Reflect","console"],b=window,E={debug:!1,shims:[]},{apply:L}=Function.prototype;var W;const C=((W=b.Reflect)==null?void 0:W.apply)||function(t,e,n){return L.call(t,e,n)};function P(t,e,n){if(typeof e=="function")return q(t,e,n);if(typeof e=="object"&&e)throw new t.intrinsics.TypeError("value must be primitive or callable");return e}const G=`return ${z.toString()}`;function q(t,e,n){return t.intrinsics.Function("params",G)([t,e,n,P,C,x])}function z(){const[t,e,n,o,r,s]=params;try{const i=[];for(let l=0,{length:d}=arguments;l<d;++l){const f=o(n,arguments[l],t);i.push(f)}const c=r(e,n.globalObject,i);return o(t,c,n)}catch(i){s(i,t)}}function x(t,{intrinsics:e}){throw E.debug&&(console.log("[DEBUG]"),console.error(t)),typeof t=="object"&&t?t.name==="SyntaxError"?new e.SyntaxError(t.message):new e.TypeError(`Cross-Realm Error: ${t.name}: ${t.message}`):new e.TypeError(`Cross-Realm Error: ${t}`)}let{assign:R,keys:J}=Object;R||(R=function(t){const e=arguments;for(let n=1,{length:o}=e;n<o;++n)for(const r of J(e[n]))t[r]=e[n][r];return t});const K=`(${X.toString()})`,H=b.FinalizationRegistry?({intrinsics:t},e,n)=>{new t.FinalizationRegistry(r=>{r.parentNode.removeChild(r)}).register(e,n)}:()=>{};function Q(t,e,n){const{document:o}=t.intrinsics,r=o.createElement("iframe");r.name="ShadowRealm",o.head.appendChild(r);for(const i of e.shared.shims){const c=o.createElement("script");c.src=i,r.contentDocument.head.appendChild(c)}const s=r.contentWindow.eval(K)(e);return H(s,n,r),s}function X({defineShadowRealm:t,ESModule:e,assign:n,globalReservedProperties:o,safeApply:r,dynamicImportPattern:s,dynamicImportReplacer:i}){var I;const c=window,{Object:l,String:d}=c,{defineProperty:f,getOwnPropertyNames:h}=l,{replace:p}=d.prototype,u={},m={};for(const a of h(c)){u[a]=c[a];const g=o.indexOf(a)!==-1,_=l.getOwnPropertyDescriptor(c,a);a==="eval"?B():g&&f(m,a,_),_.configurable?delete c[a]:_.writable?c[a]=void 0:g||f(m,a,{value:void 0})}((I=u.Symbol)==null?void 0:I.unscopables)&&f(m,u.Symbol.unscopables,{value:l.seal(l.create(null))});for(const a of h(u.EventTarget.prototype))a!=="constructor"&&f(m,a,{value:void 0});m.globalThis=m,m.Function=V();const w={intrinsics:u,globalObject:m};t(m,w);const v=new e(w);return w.esm=v,f(m,"__from",{value:a=>v.get(a)}),f(m,"__export",{set:a=>n(v.exports,a)}),f(m,"__default",{set:a=>v.exports.default=a}),f(m,"__import",{value:a=>v.import(a)}),w;function B(){let a=!1;const g=N();f(m,"eval",{get(){return a?(a=!1,u.eval):g},set(_){_===u&&(a=!0)}})}function N(){const a=u.Function("with(this)return eval(arguments[0])");return{eval(g){return g=r(p,`'use strict';undefined;${g}`,[s,i]),m.eval=u,r(a,m,[g])}}.eval}function V(){const a=u.Function,{toString:g}=a;function _(){const k=r(a,null,arguments);let S=r(g,k,[]);S=r(p,S,[s,i]);const M=a(`with(this)return function(){'use strict';return ${S}}`),T=r(M,m,[])();return function(){return r(T,this===c?void 0:this,arguments)}}return _.prototype=a.prototype,a.prototype.constructor=_,_}}const $=[],y=[],A=/\bimport\s*(\(|\/[/*])/g,j=t=>`__${t}`,F=/([^\s,]+)\s+as\s+([^\s,]+)/g,Y=[{p:/\bexport\s+((var|let|const)\s+([^;]+)|(async\s+)?function(\s+|\s*\*\s*)([^\s(]+)|class\s+([^\s{]+))/g,r(t,e,n,o,r,s,i,c){if(n){for(const l of o.split(","))l.replace(/^\s*([^\s={}:]+)\s*($|=|})|[:{]\s*([^\s={}:]+)\s*($|=|})/,(d,f,h,p)=>(y.push(f||p),d));return e}else return i?`__export = {${i}:${i}}; ${e}`:(y.push(c),e)}},{p:/\bexport\s+default\s+((async\s+)?function(\s+|\s*\*\s*)([^\s(]+)|class\s+([^\s{]+))?/g,r(t,e,n,o,r,s){return r?`__default = ${r}; ${e}`:s?(y.push(s),e):t.replace(/export\s+default/,"__default =")}},{p:/\bexport\s*(\*\s*(as\s+(\S+)\s+)?from\s*('[^']+'|"[^"]+"|`[^`]+`)|{([^}]+)}(\s*from\s*('[^']+'|"[^"]+"|`[^`]+`))?)/g,r(t,e,n,o,r,s,i,c){if(r)return $.push(r),o?`__export = { ${o}: __from(${r}) }`:`__export = __from(${r})`;if(c){$.push(c);const d=[];let f=!1;const h=s.replace(/([^\s,]+)(\s*,|\s+as\s+([^\s,]+))?/g,(p,u,m,w)=>w?(d.push(w),`${u}:${w}`):u==="default"?(f=!0,""):(d.push(u),p));return f&&d.push(`default: __from(${c}).default`),`;(function(){var {${h}} = __from(${c});__export = {${d.join()}}}())`}return`__export = {${s.replace(F,"$2:$1")}}`}},{p:/\bimport\b(\s*('[^']+'|"[^"]+"|`[^`]+`)|(\s*{([^}]+)}\s*|\s*\*\s*as\s+(\S+)\s+|\s+([^\s,]+)\s*(,\s*{([^}]+)}\s*|,\s*\*\s*as\s+(\S+)\s+)?)\bfrom\s*('[^']+'|"[^"]+"|`[^`]+`))/g,r(t,e,n,o,r,s,i,c,l,d,f){if(n)return $.push(n),`__from(${n})`;if($.push(f),r)return`var {${r.replace(F,"$1:$2")}} = __from(${f})`;if(s)return`var ${s} = __from(${f})`;if(i)if(l){const h=l.replace(F,"$1:$2");return`var ${i} = __from(${f}).default, {${h}} = __from(${f})`}else return d?`var ${d} = __from(${f}), ${i} = ${d}.default`:`var ${i} = __from(${f}).default`}},{p:/\bimport\.meta\b/g,r:"__meta"},{p:A,r:j}];class Z{constructor(e){this.cache={},this.realmRec=e}get(e){if(this.cache[e])return this.cache[e].exports;throw new this.realmRec.intrinsics.Error("Module does not exist")}import(e,n=this.realmRec){const{Promise:o}=n.intrinsics;let r=this.cache[e];return r||(r=this.cache[e]={}),r.exports?o.resolve(r.exports):new o((s,i)=>{r.promise=fetch(e,{credentials:"include"}).then(c=>c.text().then(l=>{const[d,f]=this.transform(l),h=[];for(let p of f){p=p.substring(1,p.length-1);const u=this.cache[p]||{};h.push(u.exports||u.promise||this.import(p))}return o.all(h).then(()=>`var __meta = {url:'${c.url}'};${d}`)})).then(c=>{var d;E.debug&&console.log("[DEBUG]",e,`
`+c);const l=Object.create(null);((d=b.Symbol)==null?void 0:d.toStringTag)&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),this.exports=l,this.realmRec.globalObject.eval(c),this.exports=void 0,s(l),r.exports=l,delete r.promise}).catch(c=>{try{x(c,n)}catch(l){i(l)}})})}transform(e){y.length=0,$.length=0;for(const{p:n,r:o}of Y)e=e.replace(n,o);if(y.length){for(let n=y.length-1;n>=0;--n)y[n]=`${y[n]}:${y[n]}`;e+=`;__export = {${y.join()}};`}return[e,$.slice()]}}function U(t,e){Object.defineProperty(t,"ShadowRealm",{configurable:!0,writable:!0,value:ee(t,e)})}function ee(t,e){if(!e){const n={document:t.document};for(const o of O)t[o]&&(n[o]=t[o]);e={intrinsics:n,globalObject:t}}return ne(e)}const te=`(${oe.toString()})`,re={createRealmRecord:Q,dynamicImportPattern:A,dynamicImportReplacer:j,getWrappedValue:P,defineShadowRealm:U,ESModule:Z,assign:R,globalReservedProperties:O,safeApply:C,wrapError:x,shared:E};function ne(t){return t.intrinsics.eval(te)(t,re)}function oe(t,e){const{TypeError:n,Object:{defineProperty:o},Promise:{prototype:{then:r}},String:s,Symbol:i}=t.intrinsics,{replace:c}=s.prototype,l=function p(){if(!(this instanceof p))throw new n("Constructor requires a new operator");const u=e.createRealmRecord(t,e,this);o(this,"__realm",{value:u})};t.intrinsics.top||(o(l,"__debug",{get:()=>e.shared.debug,set:p=>e.shared.debug=p}),o(l,"__shims",{get:()=>e.shared.shims,set:p=>e.shared.shims=p}));function d(p){if(typeof p!="string")throw new n("evaluate expects a string");p=e.safeApply(c,p,[e.dynamicImportPattern,e.dynamicImportReplacer]);try{const u=this.__realm.globalObject.eval(p);return e.getWrappedValue(t,u,this.__realm)}catch(u){e.wrapError(u,t)}}function f(p,u){return p=s(p),u=s(u),e.safeApply(r,this.__realm.esm.import(p,t),[m=>{if(!(u in m))throw new n(`"${p}" has no export named "${u}"`);return e.getWrappedValue(t,m[u],this.__realm)}])}const{prototype:h}=l;return o(h,"evaluate",{configurable:!0,writable:!0,value:d}),o(h,"importValue",{configurable:!0,writable:!0,value:f}),(i==null?void 0:i.toStringTag)&&o(h,i.toStringTag,{configurable:!0,value:"ShadowRealm"}),l}b.ShadowRealm||U(b);const se=`
class ShadowRealm {
    constructor();
    evaluate(sourceText: string): Primitive | Function;
    importValue(specifier: string, bindingName: string): Promise<Primitive | Function>;
}

`;setTimeout(()=>{const t=document.querySelector(".code");t.textContent=se});
