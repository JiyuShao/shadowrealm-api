const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};te();const q=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","AggregateError","Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","Proxy","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","Atomics","JSON","Math","Reflect","console"],S=window,{console:U,Object:j}=S,M={debug:!1,shims:[]},{apply:re}=Function.prototype;var Z;const z=((Z=S.Reflect)==null?void 0:Z.apply)||function(t,e,n){return re.call(t,e,n)};function H(t,e,n){if(typeof e=="function")return oe(t,e,n);if(typeof e=="object"&&e)throw new t.intrinsics.TypeError("value must be primitive or callable");return e}const ne="return "+se.toString();function oe(t,e,n){return t.intrinsics.Function("params",ne)([t,e,n,H,z,N])}function se(){const[t,e,n,o,r,s]=params;try{const c=arguments,l=[];for(let m=0,{length:d}=c;m<d;++m){const _=o(n,c[m],t);l.push(_)}const u=r(e,n.globalObject,l);return o(t,u,n)}catch(c){s(c,t)}}function N(t,{intrinsics:e}){throw M.debug&&(U.log("[DEBUG]"),U.error(t)),typeof t=="object"&&t?t.name==="SyntaxError"?new e.SyntaxError(t.message):new e.TypeError("Cross-Realm Error: "+t.name+": "+t.message):new e.TypeError("Cross-Realm Error: "+t)}let{assign:$,keys:ae}=j;$||($=function(t){const e=arguments;for(let n=1,{length:o}=e;n<o;++n){const r=e[n];if(r&&typeof r=="object")for(const s of ae(r))t[s]=r[s]}return t});const J=S.URL||S.webkitURL;function K(t,e,n){try{return new J(t,e)}catch(o){throw new n.intrinsics[o.name](o.message)}}const ie="("+le.toString()+")",ce=S.FinalizationRegistry?({intrinsics:t},e,n)=>{new t.FinalizationRegistry(r=>{r.parentNode.removeChild(r)}).register(e,n)}:()=>{};function ue(t,e,n){const{document:o}=t.intrinsics,r=o.createElement("iframe");r.name="ShadowRealm",o.head.appendChild(r);for(const c of e.shared.shims){const l=o.createElement("script");l.src=c,r.contentDocument.head.appendChild(l)}const s=r.contentWindow.eval(ie)(e);return ce(s,n,r),s}function le({defineShadowRealm:t,ESModule:e,assign:n,globalReservedProperties:o,safeApply:r,dynamicImportPattern:s,dynamicImportReplacer:c}){var V;const l=window,{Object:u,String:m}=l,{defineProperty:d,getOwnPropertyNames:_}=u,{replace:p}=m.prototype,i={},f={};let x;for(const a of _(l)){i[a]=l[a];const h=o.indexOf(a)!==-1,y=u.getOwnPropertyDescriptor(l,a);a==="eval"?I():h&&d(f,a,y),y.configurable?delete l[a]:y.writable?l[a]=x:h||d(f,a,{value:x})}((V=i.Symbol)==null?void 0:V.unscopables)&&d(f,i.Symbol.unscopables,{value:u.seal(u.create(null))});for(const a of _(i.EventTarget.prototype))a!=="constructor"&&d(f,a,{value:x});f.globalThis=f,f.Function=P();const E={intrinsics:i,globalObject:f};t(f,E);const w=new e(E);return E.esm=w,d(f,"__from",{value:(a,h)=>w.get(a,h)}),d(f,"__export",{set:a=>n(w.exports,a)}),d(f,"__default",{set:a=>w.exports.default=a}),d(f,"__import",{value:(a,h)=>w.import(a,h)}),E;function I(){let a=!1;const h=T();d(f,"eval",{get(){return a?(a=!1,i.eval):h},set(y){y===i&&(a=!0)}})}function T(){const a=i.Function("with(this)return eval(arguments[0])");return{eval(h){return h=r(p,'"use strict";undefined;'+h,[s,c]),f.eval=i,r(a,f,[h])}}.eval}function P(){const a=i.Function,{toString:h}=a;function y(){const A=r(a,null,arguments);let b=r(h,A,[]);b=r(p,b,[s,c]);const D=a('with(this)return function(){"use strict";return '+b+"}"),G=r(D,f,[])();return function(){return r(G,this===l?void 0:this,arguments)}}return y.prototype=a.prototype,a.prototype.constructor=y,y}}const F=[],v=[],Q=/\bimport\s*(\(|\/[/*])/g,X=t=>"__"+t,fe="\\bexport\\b(\\s+((var|let|const)\\s+([^;]+)|(async\\s+)?function(\\s+|\\s*\\*\\s*)([^\\s(]+)|class\\s+([^\\s{]+)|default\\s+((async\\s+)?function(\\s+|\\s*\\*\\s*)([^\\s(]+)|class\\s+([^\\s{]+)|)?)|\\s*(\\*\\s*(as\\s+(\\S+)\\s+)?from\\s*(\"[^\"]+\"|'[^']+'|`[^`]+`)|{([^}]+)}(\\s*from\\s*(\"[^\"]+\"|'[^']+'|`[^`]+`))?))|\\bimport\\b(\\s*(({([^}]+)}\\s*|\\*\\s*as\\s+(\\S+)\\s+)from\\s*)?|\\s+([^{*\"'`]+)(\\s+from|\\s*,\\s*({([^}]+)}\\s*|\\*\\s*as\\s+(\\S+)\\s+)from)\\s*)(\"[^\"]+\"|'[^']+'|`[^`]+`)",L=/([^\s,]+)\s+as\s+([^\s,]+)/g,pe=[{p:RegExp(fe,"g"),r(t,e,n,o,r,s,c,l,u,m,d,_,p,i,f,x,E,w,I,T,P,V,a,h,y,A,b,D,G,W,k,C){if(r){for(const g of r.split(","))g.replace(/^\s*([^\s={}:]+)\s*($|=|})|[:{]\s*([^\s={}:]+)\s*($|=|})/,(R,O,ee,B)=>(v.push(O||B),R));return n}if(l)return"__export={"+l+":"+l+"};"+n;if(u)return v.push(u),n;if(p)return"__default="+p+";"+m;if(i)return v.push(i),n;if(n)return n.replace(/^default/,"__default=");if(w)return F.push(w),E?"__export={"+E+":__from("+w+",__meta.url)}":"__export=__from("+w+",__meta.url)";if(P){F.push(P);const g=[];return I.replace(/([^\s,]+)(\s+as\s+([^\s,]+))?/g,(R,O,ee,B)=>(g.push((B||O)+":m."+O),R)),";(function(){var m=__from("+P+",__meta.url);__export={"+g.join()+"}}())"}if(I){const g=I.replace(L,"$2:$1");return"__export={"+g+"}"}if(C){F.push(C);const g="=__from("+C+",__meta.url)";if(y){const R=y.replace(L,"$1:$2");return"const{"+R+"}"+g}if(A)return"var "+A+g;if(W){const R=W.replace(L,"$1:$2");return"const{"+R+"}"+g+","+b+g+".default"}return k?"var "+k+g+","+b+"="+k+".default":b?"var "+b+g+".default":C}}},{p:/\bimport\.meta\b/g,r:"__meta"},{p:Q,r:X}];function me(t){for(const{p:n,r:o}of pe)t=t.replace(n,o);if(v.length){for(let n=v.length-1;n>=0;--n)v[n]+=":"+v[n];t+=";__export={"+v.join()+"}",v.length=0}const e=[];for(let n=0,{length:o}=F;n<o;++n){const r=F[n];e.push(r.substring(1,r.length-1))}return F.length=0,[t,e]}class de{constructor(e){this.cache={},this.exports={},this.realmRec=e}get(e,n){const o=this,{href:r}=K(e,n,o.realmRec),s=o.cache[r];if(s&&s.exports)return s.exports;throw new o.realmRec.intrinsics.Error("Module does not exist")}import(e,n=location.href,o){const r=this;o||(o=r.realmRec);const{href:s}=K(e,n,o);return new o.intrinsics.Promise((c,l)=>{r.load(s).then(u=>{c(typeof u=="string"?r.eval(s,u):u)}).catch(u=>{try{N(u,o)}catch(m){l(m)}})})}load(e){const n=this;let o=n.cache[e];return o||(o=n.cache[e]={}),o.exports?Promise.resolve(o.exports):o.promise?o.promise.then(()=>o.exports):(o.promise=fetch(e,{credentials:"same-origin"}).then(r=>r.text()).then(r=>{const[s,c]=me(r),l=[];for(let u=0,{length:m}=c;u<m;++u){const{href:d}=new J(c[u],e);c[u]=d,l.push(n.load(d).catch(U.error))}return Promise.all(l).then(u=>{for(let m=0,{length:d}=u;m<d;++m)typeof u[m]=="string"&&n.eval(c[m],u[m]);return'var __meta={url:"'+e+'"};'+s})}),o.promise)}eval(e,n){var c;M.debug&&U.log(`[DEBUG]
`,n);const o=j.create(null);((c=S.Symbol)==null?void 0:c.toStringTag)&&j.defineProperty(o,Symbol.toStringTag,{value:"Module"});const r=this;r.exports=o,r.realmRec.globalObject.eval(n),r.exports={};const s=r.cache[e];return s.exports=o,delete s.promise,o}}function Y(t,e){j.defineProperty(t,"ShadowRealm",{configurable:!0,writable:!0,value:he(t,e)})}function he(t,e){if(!e){const n={document:t.document};for(const o of q)t[o]&&(n[o]=t[o]);e={intrinsics:n,globalObject:t}}return we(e)}const ge="("+_e.toString()+")",ye={createRealmRecord:ue,dynamicImportPattern:Q,dynamicImportReplacer:X,getWrappedValue:H,defineShadowRealm:Y,ESModule:de,assign:$,globalReservedProperties:q,safeApply:z,wrapError:N,shared:M};function we(t){return t.intrinsics.eval(ge)(t,ye)}function _e(t,e){const{TypeError:n,Object:{defineProperty:o},Promise:{prototype:{then:r}},String:s,Symbol:c}=t.intrinsics,{replace:l}=s.prototype,u=function p(){var i=this;if(!(i instanceof p))throw new n("Constructor requires a new operator");const f=e.createRealmRecord(t,e,i);o(i,"__realm",{value:f})};if(!t.intrinsics.top){const{shared:p}=e;o(u,"__debug",{get:()=>p.debug,set:i=>p.debug=i}),o(u,"__shims",{get:()=>p.shims,set:i=>p.shims=i})}function m(p){if(typeof p!="string")throw new n("evaluate expects a string");p=e.safeApply(l,p,[e.dynamicImportPattern,e.dynamicImportReplacer]);try{const i=this.__realm.globalObject.eval(p);return e.getWrappedValue(t,i,this.__realm)}catch(i){e.wrapError(i,t)}}function d(p,i){p=s(p),i=s(i);const{__realm:f}=this;return e.safeApply(r,f.esm.import(p,void 0,t),[x=>{if(!(i in x))throw new n('"'+p+'" has no export named "'+i+'"');return e.getWrappedValue(t,x[i],f)}])}const{prototype:_}=u;return o(_,"evaluate",{configurable:!0,writable:!0,value:m}),o(_,"importValue",{configurable:!0,writable:!0,value:d}),(c==null?void 0:c.toStringTag)&&o(_,c.toStringTag,{configurable:!0,value:"ShadowRealm"}),u}S.ShadowRealm||Y(S);const ve=`
class ShadowRealm {
    constructor();
    evaluate(sourceText: string): Primitive | Function;
    importValue(specifier: string, bindingName: string): Promise<Primitive | Function>;
}

`;setTimeout(()=>{const t=document.querySelector(".code");t.textContent=ve});
