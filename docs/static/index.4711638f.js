const T=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}};T();const O=["globalThis","Infinity","NaN","undefined","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","AggregateError","Array","ArrayBuffer","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","Proxy","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakRef","WeakSet","Atomics","JSON","Math","Reflect","console"],b=window,{apply:D}=Function.prototype;var U;const I=((U=b.Reflect)==null?void 0:U.apply)||function(r,e,n){return D.call(r,e,n)};function P(r,e,n){if(typeof e=="function")return q(r,e,n);if(typeof e=="object"&&e)throw new r.intrinsics.TypeError("value must be primitive or callable");return e}const L=`return ${z.toString()}`;function q(r,e,n){return r.intrinsics.Function("params",L)([r,e,n,P,I,E])}function z(){const[r,e,n,o,t,s]=params;try{const c=[];for(let i=0,{length:m}=arguments;i<m;++i){const l=o(n,arguments[i],r);c.push(l)}const u=t(e,n.globalObject,c);return o(r,u,n)}catch(c){s(c,r,n.debug)}}function E(r,{intrinsics:e},n=!1){throw n&&(console.log("[DEBUG]"),console.error(r)),typeof r=="object"&&r?r.name==="SyntaxError"?new e.SyntaxError(r.message):new e.TypeError(`Cross-Realm Error: ${r.name}: ${r.message}`):new e.TypeError(`Cross-Realm Error: ${r}`)}let{assign:R,keys:G}=Object;R||(R=function(r){const e=arguments;for(let n=1,{length:o}=e;n<o;++n)for(const t of G(e[n]))r[t]=e[n][t];return r});const J=`(${Q.toString()})`,K=window.FinalizationRegistry?({intrinsics:r},e,n)=>{new r.FinalizationRegistry(t=>{t.parentNode.removeChild(t)}).register(e,n)}:()=>{};function H(r,e,n){const{document:o}=r.intrinsics,t=o.createElement("iframe");t.name="ShadowRealm",o.head.appendChild(t);const s=t.contentWindow.eval(J)(e);return K(s,n,t),s}function Q({defineShadowRealm:r,ESModule:e,assign:n,globalReservedProperties:o,safeApply:t,dynamicImportPattern:s,dynamicImportReplacer:c}){var F;const u=window,{Object:i,String:m}=u,{defineProperty:l,getOwnPropertyNames:f}=i,{replace:p}=m.prototype,d={},h={};for(const a of f(u)){d[a]=u[a];const g=o.indexOf(a)!==-1,_=i.getOwnPropertyDescriptor(u,a);a==="eval"?W():g&&l(h,a,_),_.configurable?delete u[a]:_.writable?u[a]=void 0:g||l(h,a,{value:void 0})}((F=d.Symbol)==null?void 0:F.unscopables)&&l(h,d.Symbol.unscopables,{value:i.preventExtensions(i.create(null))});for(const a of f(d.EventTarget.prototype))a!=="constructor"&&l(h,a,{value:void 0});h.globalThis=h,h.Function=N();const w={intrinsics:d,globalObject:h};r(h,w);const v=new e(w);return w.esm=v,l(h,"__from",{value:a=>v.get(a)}),l(h,"__export",{set:a=>n(v.exports,a)}),l(h,"__default",{set:a=>v.exports.default=a}),l(h,"__import",{value:a=>v.import(a)}),w;function W(){let a=!1;const g=B();l(h,"eval",{get(){return a?(a=!1,d.eval):g},set(_){_===d&&(a=!0)}})}function B(){const a=d.Function("with(this)return eval(arguments[0])");return{eval(g){return g=t(p,`'use strict';undefined;${g}`,[s,c]),h.eval=d,t(a,h,[g])}}.eval}function N(){const a=d.Function,{toString:g}=a;function _(){const V=t(a,null,arguments);let S=t(g,V,[]);S=t(p,S,[s,c]);const k=a(`with(this)return function(){'use strict';return ${S}}`),M=t(k,h,[])();return function(){return t(M,this===u?void 0:this,arguments)}}return _.prototype=a.prototype,a.prototype.constructor=_,_}}const $=[],y=[],A=/\bimport\s*(\(|\/[/*])/g,C=r=>`__${r}`,x=/([^\s,]+)\s+as\s+([^\s,]+)/g,X=[{p:/\bexport\s+((var|let|const)\s+([^;]+)|(async\s+)?function(\s+|\s*\*\s*)([^\s(]+)|class\s+([^\s{]+))/g,r(r,e,n,o,t,s,c,u){if(n){for(const i of o.split(","))i.replace(/^\s*([^\s={}:]+)\s*($|=|})|[:{]\s*([^\s={}:]+)\s*($|=|})/,(m,l,f,p)=>(y.push(l||p),m));return e}else return c?`__export = {${c}:${c}}; ${e}`:(y.push(u),e)}},{p:/\bexport\s+default\s+((async\s+)?function(\s+|\s*\*\s*)([^\s(]+)|class\s+([^\s{]+))?/g,r(r,e,n,o,t,s){return t?`__default = ${t}; ${e}`:s?(y.push(s),e):r.replace(/export\s+default/,"__default =")}},{p:/\bexport\s*(\*\s*(as\s+(\S+)\s+)?from\s*('[^']+'|"[^"]+"|`[^`]+`)|{([^}]+)}(\s*from\s*('[^']+'|"[^"]+"|`[^`]+`))?)/g,r(r,e,n,o,t,s,c,u){if(t)return $.push(t),o?`__export = { ${o}: __from(${t}) }`:`__export = __from(${t})`;if(u){$.push(u);const m=[];let l=!1;const f=s.replace(/([^\s,]+)(\s*,|\s+as\s+([^\s,]+))?/g,(p,d,h,w)=>w?(m.push(w),`${d}:${w}`):d==="default"?(l=!0,""):(m.push(d),p));return l&&m.push(`default: __from(${u}).default`),`;(function(){var {${f}} = __from(${u});__export = {${m.join()}}}())`}return`__export = {${s.replace(x,"$2:$1")}}`}},{p:/\bimport\b(\s*('[^']+'|"[^"]+"|`[^`]+`)|(\s*{([^}]+)}\s*|\s*\*\s*as\s+(\S+)\s+|\s+([^\s,]+)\s*(,\s*{([^}]+)}\s*|,\s*\*\s*as\s+(\S+)\s+)?)\bfrom\s*('[^']+'|"[^"]+"|`[^`]+`))/g,r(r,e,n,o,t,s,c,u,i,m,l){if(n)return $.push(n),`__from(${n})`;if($.push(l),t)return`var {${t.replace(x,"$1:$2")}} = __from(${l})`;if(s)return`var ${s} = __from(${l})`;if(c)if(i){const f=i.replace(x,"$1:$2");return`var ${c} = __from(${l}).default, {${f}} = __from(${l})`}else return m?`var ${m} = __from(${l}), ${c} = ${m}.default`:`var ${c} = __from(${l}).default`}},{p:/\bimport\.meta\b/g,r:"__meta"},{p:A,r:C}];class Y{constructor(e){this.cache={},this.realmRec=e}get(e){if(this.cache[e])return this.cache[e].exports;throw new this.realmRec.intrinsics.Error("Module does not exist")}import(e,n=this.realmRec){const{Promise:o}=n.intrinsics;let t=this.cache[e];return t||(t=this.cache[e]={}),t.exports?o.resolve(t.exports):new o((s,c)=>{t.promise=fetch(e,{credentials:"include"}).then(u=>u.text().then(i=>{const[m,l]=this.transform(i),f=[];for(let p of l){p=p.substring(1,p.length-1);const d=this.cache[p]||{};f.push(d.exports||d.promise||this.import(p))}return o.all(f).then(()=>`var __meta = {url:'${u.url}'};${m}`)})).then(u=>{var m;this.realmRec.debug&&console.log("[DEBUG]",e,`
`+u);const i=Object.create(null);((m=b.Symbol)==null?void 0:m.toStringTag)&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),this.exports=i,this.realmRec.globalObject.eval(u),this.exports=void 0,s(i),t.exports=i,delete t.promise}).catch(u=>{try{E(u,n,this.realmRec.debug)}catch(i){c(i)}})})}transform(e){y.length=0,$.length=0;for(const{p:n,r:o}of X)e=e.replace(n,o);if(y.length){for(let n=y.length-1;n>=0;--n)y[n]=`${y[n]}:${y[n]}`;e+=`;__export = {${y.join()}};`}return[e,$.slice()]}}function j(r,e){Object.defineProperty(r,"ShadowRealm",{configurable:!0,writable:!0,value:Z(r,e)})}function Z(r,e){if(!e){const n={document:r.document};for(const o of O)r[o]&&(n[o]=r[o]);e={intrinsics:n,globalObject:r}}return re(e)}const ee=`(${ne.toString()})`,te={createRealmRecord:H,dynamicImportPattern:A,dynamicImportReplacer:C,getWrappedValue:P,defineShadowRealm:j,ESModule:Y,assign:R,globalReservedProperties:O,safeApply:I,wrapError:E};function re(r){return r.intrinsics.eval(ee)(r,te)}function ne(r,e){const{TypeError:n,Object:{defineProperty:o},Promise:{prototype:{then:t}},String:s,Symbol:c}=r.intrinsics,{replace:u}=s.prototype;function i(){if(!(this instanceof i))throw new n("Constructor requires a new operator");const f=e.createRealmRecord(r,e,this);o(this,"__realm",{value:f}),o(this,"__debug",{get:()=>f.debug,set:p=>f.debug=p})}function m(f){if(typeof f!="string")throw new n("evaluate expects a string");f=e.safeApply(u,f,[e.dynamicImportPattern,e.dynamicImportReplacer]);try{const p=this.__realm.globalObject.eval(f);return e.getWrappedValue(r,p,this.__realm)}catch(p){e.wrapError(p,r,this.__realm.debug)}}function l(f,p){return f=s(f),p=s(p),e.safeApply(t,this.__realm.esm.import(f,r),[d=>{if(!(p in d))throw new n(`"${f}" has no export named "${p}"`);return e.getWrappedValue(r,d[p],this.__realm)}])}return o(i.prototype,"evaluate",{configurable:!0,writable:!0,value:m}),o(i.prototype,"importValue",{configurable:!0,writable:!0,value:l}),(c==null?void 0:c.toStringTag)&&o(i.prototype,c.toStringTag,{configurable:!0,value:"ShadowRealm"}),i}b.ShadowRealm||j(b);const oe=document.querySelector(".code");oe.textContent=`
class ShadowRealm {
    constructor();
    evaluate(sourceText: string): Primitive | Function;
    importValue(specifier: string, bindingName: string): Promise<Primitive | Function>;
}

`;
